<!doctype html>
<html lang="en" data-baseline="stable-2025-10-01__rails-460px__galC-6-only">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gardenicity — Hero → S1 → S2 → gallery-A-Left → S3 → S4 → S5 → gallery-B-Center → S8 → S9 → gallery-C-Right → S11 → S12 → S13 → S14 → S15</title>
<style>

/* ===== Base ===== */
html,body{
margin:0; padding:0; height:100%;
background:#eaeeec; color:#fff;
font-family:"Acumin Pro",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
:root{
/* HERO */
--shift:0px; --titleOpacity:0; --linksOpacity:0; --heroAlpha:1; --heroBlur:0;
/* S1 */
--s1:0; --s1Overlay:0; --s1Y:0px; --s1ImgOpacity:0;
/* S2 */
--s2:0; --s2Overlay:0; --s2Y:0px; --s2ImgOpacity:0;
/* gallery-A-Left */
--galA:0;
--galAImg0Opacity:0; --galAImg1Opacity:0; --galAImg2Opacity:0; --galAImg3Opacity:0; --galAImg4Opacity:0; /* ADDED: Image 4 Opacity */
--galAReady:0;
/* S3 (full bleed) */
--s3:0; --s3ImgOpacity:0; --s3Scale:1;
/* S4 */
--s4:0; --s4Overlay:0; --s4Y:0px; --s4ImgOpacity:0;
/* S5 */
--s5:0; --s5Overlay:0; --s5Y:0px; --s5ImgOpacity:0;
/* gallery-B-Center */
--galB:0;
--galBImg0Opacity:0; --galBImg1Opacity:0; --galBImg2Opacity:0; --galBImg3Opacity:0; --galBImg4Opacity:0;
--galBReady:0;
/* S8 (full bleed) */
--s8:0; --s8ImgOpacity:0; --s8Scale:1; --s8Ready:0; --s8NewOpacity:0; /* ADDED: New S8 Image Opacity */
/* S9 */
--s9:0; --s9Overlay:0; --s9Y:0px; --s9ImgOpacity:0;
/* gallery-C-Right (media left, no text) */
--galC:0;
--galCImg0Opacity:0; --galCImg1Opacity:0; --galCImg2Opacity:0; --galCImg3Opacity:0; --galCImg4Opacity:0; --galCImg5Opacity:0;
--galCReady:0;
/* S11 (left text / right image) */
--s11:0; --s11Overlay:0; --s11Y:0px; --s11ImgOpacity:0;
/* S12 (full bleed) */
--s12:0; --s12ImgOpacity:0; --s12Scale:1; --s12Ready:0;
/* S13 (like S1) */
--s13:0; --s13Overlay:0; --s13Y:0px; --s13ImgOpacity:0;
/* S14 (like S2) */
--s14:0; --s14Overlay:0; --s14Y:0px; --s14ImgOpacity:0;
/* S15 (full bleed + centered overlay) */
--s15:0; --s15Overlay:0; --s15Y:0px; --s15ImgOpacity:0; --s15Scale:1; --s15Ready:0;
}

/* ===== HERO ===== */
.hero-fixed{
position:fixed; inset:0; z-index:3;
opacity:var(--heroAlpha);
filter:blur(calc(var(--heroBlur)*10px));
pointer-events:auto; will-change:opacity,filter;
}
.hero-bg{
position:absolute; inset:0;
background:url("assets/hero1gc.jpg") center/cover no-repeat;
opacity:0; animation:heroIn 900ms ease-out forwards; pointer-events:none;
}
@keyframes heroIn{ from{opacity:0} to{opacity:1} }
.hero-media{
position:absolute; top:96px; bottom:96px; left:96px; right:82px;
display:flex; align-items:flex-end; justify-content:flex-start; overflow:hidden;
}
.col{ position:relative; max-width:700px; transform:translateY(var(--shift)); will-change:transform; }
.hero-title{ margin:0 0 24px 0; font-weight:400; font-size:100px; line-height:100px; opacity:var(--titleOpacity); }
.hero-title .line{ display:block; }
.hero-links{ display:flex; flex-direction:column; gap:10px; font-size:24px; line-height:30px; opacity:var(--linksOpacity); }
.hero-links a{ color:#fff; text-decoration:none; transition:color .2s ease; }
.hero-links a:hover,.hero-links a:focus-visible{ color:#00A86B; }
.driver{ height:200vh; }

/* ===== PINNED FRAMES ===== */
figure.frame{ margin:0; }
.frame{
position:fixed; z-index:1; pointer-events:none;
display:flex; align-items:center; justify-content:center; overflow:hidden;
}
.frame img{ width:100%; height:100%; object-fit:contain; display:block; }

/* S1 image RIGHT (text left) */
.s1-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
opacity: var(--s1ImgOpacity);
}

/* S2 image LEFT (mirror) */
.s2-frame{
top:96px; bottom:96px;
left: 96px;
right: calc(82px + 96px + 460px);
opacity: var(--s2ImgOpacity);
}

/* gallery-A-Left (right media area) */
.galA-left-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
display:block;
}
.galA-left-frame img{
position:absolute; inset:0;
width:100%; height:100%;
object-fit:contain; object-position:center;
will-change:opacity;
}
#galA-img0{ opacity: var(--galAImg0Opacity); }
#galA-img1{ opacity: var(--galAImg1Opacity); }
#galA-img2{ opacity: var(--galAImg2Opacity); }
#galA-img3{ opacity: var(--galAImg3Opacity); }
#galA-img4{ opacity: var(--galAImg4Opacity); } /* ADDED: Image 4 Opacity */


/* S3 full-bleed */
.s3-frame{ top:0; right:0; bottom:0; left:0; opacity:var(--s3ImgOpacity); }
.frame.s3-frame>img{
width:100%; height:100%;
object-fit:cover !important; object-position:center;
transform: scale(var(--s3Scale));
transform-origin: center center;
will-change: transform;
}

/* S4 image RIGHT */
.s4-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
opacity: var(--s4ImgOpacity);
}

/* S5 image LEFT */
.s5-frame{
top:96px; bottom:96px;
left: 96px;
right: calc(82px + 96px + 460px);
opacity: var(--s5ImgOpacity);
}

/* gallery-B-Center (center media area) */
.galB-center-frame{
top:96px; bottom:96px; left:96px; right:82px;
display:block;
}
.galB-center-frame img{
position:absolute; inset:0;
width:100%; height:100%;
object-fit:contain; object-position:center;
will-change:opacity;
}
#galB-img0{ opacity: var(--galBImg0Opacity); }
#galB-img1{ opacity: var(--galBImg1Opacity); }
#galB-img2{ opacity: var(--galBImg2Opacity); }
#galB-img3{ opacity: var(--galBImg3Opacity); }
#galB-img4{ opacity: var(--galBImg4Opacity); }

/* S8 full-bleed (Original image) */
.s8-frame{ top:0; right:0; bottom:0; left:0; opacity:var(--s8ImgOpacity); }
.frame.s8-frame>img{
width:100%; height:100%;
object-fit:cover !important; object-position:center;
transform: scale(var(--s8Scale));
transform-origin: center center;
will-change: transform;
}
/* S8 full-bleed (NEW image for cross-fade) */
.s8-BLD-frame{ top:0; right:0; bottom:0; left:0; opacity:var(--s8NewOpacity); }
.frame.s8-BLD-frame>img{
    width:100%; height:100%;
    object-fit:cover !important; object-position:center;
    transform: scale(var(--s8Scale)); /* Reusing the original scale variable */
    transform-origin: center center;
    will-change: transform;
}


/* S9 image RIGHT (like S1/S4) */
.s9-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
opacity: var(--s9ImgOpacity);
}

/* gallery-C-Right (media on LEFT, no text) */
.galC-left-frame{
top:96px; bottom:96px;
left: 96px;
right: calc(82px + 96px + 460px);
display:block;
}
.galC-left-frame img{
position:absolute; inset:0;
width:100%; height:100%;
object-fit:contain; object-position:center;
will-change:opacity;
}
#galC-img0{ opacity: var(--galCImg0Opacity); }
#galC-img1{ opacity: var(--galCImg1Opacity); }
#galC-img2{ opacity: var(--galCImg2Opacity); }
#galC-img3{ opacity: var(--galCImg3Opacity); }
#galC-img4{ opacity: var(--galCImg4Opacity); }
#galC-img5{ opacity: var(--galCImg5Opacity); }

/* S11 image RIGHT (like S1/S4/S9) */
.s11-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
opacity: var(--s11ImgOpacity);
}

/* S12 full-bleed */
.s12-frame{ top:0; right:0; bottom:0; left:0; opacity:var(--s12ImgOpacity); }
.frame.s12-frame>img{
width:100%; height:100%;
object-fit:cover !important; object-position:center;
transform: scale(var(--s12Scale));
transform-origin: center center;
will-change: transform;
}

/* S13 image RIGHT (like S1) */
.s13-frame{
top:96px; bottom:96px;
left: calc(96px + 460px + 96px);
right: 82px;
opacity: var(--s13ImgOpacity);
}

/* S14 image LEFT (like S2) */
.s14-frame{
top:96px; bottom:96px;
left: 96px;
right: calc(82px + 96px + 460px);
opacity: var(--s14ImgOpacity);
}

/* S15 full-bleed */
.s15-frame{ top:0; right:0; bottom:0; left:0; opacity:var(--s15ImgOpacity); }
.frame.s15-frame>img{
width:100%; height:100%;
object-fit:cover !important; object-position:center;
transform: scale(var(--s15Scale));
transform-origin: center center;
will-change: transform;
}

/* ===== SECTION DRIVERS - UPDATED HEIGHTS ===== */
.s1-wrap, .s2-wrap, .s3-wrap, .s4-wrap, .s5-wrap,
.galB-center-wrap, .s9-wrap, .galC-left-wrap, .s11-wrap, .s12-wrap,
.s13-wrap, .s14-wrap, .s15-wrap{
position:relative; height:280vh; background:#eaeeec;
}
.galA-left-wrap{ /* NEW HEIGHT for 5 images */
position:relative; height:350vh; background:#eaeeec;
}
.s8-wrap{ /* NEW HEIGHT for cross-fade animation */
position:relative; height:480vh; background:#eaeeec;
}

/* ===== TEXT OVERLAYS (rails) ===== */
.s1-overlay, .s2-overlay, .s4-overlay, .s5-overlay, .s9-overlay, .s11-overlay, .s13-overlay, .s14-overlay, .s15-overlay{
position:fixed; inset:0; z-index:2; pointer-events:none;
}
.s1-overlay{ opacity:var(--s1Overlay); }
.s2-overlay{ opacity:var(--s2Overlay); }
.s4-overlay{ opacity:var(--s4Overlay); }
.s5-overlay{ opacity:var(--s5Overlay); }
.s9-overlay{ opacity:var(--s9Overlay); }
.s11-overlay{ opacity:var(--s11Overlay); }
.s13-overlay{ opacity:var(--s13Overlay); }
.s14-overlay{ opacity:var(--s14Overlay); }
.s15-overlay{ opacity:var(--s15Overlay); }

/* LEFT rails (text left) */
.s1-rail, .s4-rail, .s9-rail, .s11-rail, .s13-rail{
position:absolute; top:0; bottom:0; left:96px; width:460px; overflow:hidden;
}

/* RIGHT rails (text right) */
.s2-rail, .s5-rail, .s14-rail{
position:absolute; top:0; bottom:0; right:96px; width:460px; overflow:hidden;
}

.s1-text{ transform:translateY(var(--s1Y)); color:#111; }
.s2-text{ transform:translateY(var(--s2Y)); color:#111; text-align:left; }
.s4-text{ transform:translateY(var(--s4Y)); color:#111; }
.s5-text{ transform:translateY(var(--s5Y)); color:#111; text-align:left; }
.s9-text{ transform:translateY(var(--s9Y)); color:#111; }
.s11-text{ transform:translateY(var(--s11Y)); color:#111; }
.s13-text{ transform:translateY(var(--s13Y)); color:#111; }
.s14-text{ transform:translateY(var(--s14Y)); color:#111; text-align:left; }

/* ===== S15: CENTER COLUMN OVERLAY (centered text) ===== */
.s15-rail{
position:absolute; top:0; bottom:0;
left:50%; transform:translateX(-50%);
width:700px; max-width:calc(100vw - 96px - 82px);
overflow:hidden;
}
.s15-text{
transform:translateY(var(--s15Y));
color:#fff; text-align:center;
}
.s1-text p, .s2-text p, .s4-text p, .s5-text p, .s9-text p, .s11-text p, .s13-text p, .s14-text p, .s15-text p{
margin:0 0 14px 0; font-size:20px; line-height:28px;
}
.after{ min-height:120vh; }

/* ===== PATCH: Enable S15 links only in S15 ===== */
.s15-overlay{
z-index:3;
pointer-events:none;
}
.s15-overlay[style*="opacity: 1"] {
pointer-events:auto;
}
.s15-text{
position:relative;
z-index:4;
pointer-events:auto;
}
.s15-text a{
color:#fff;
text-decoration:none;
transition:color .2s ease;
position:relative;
z-index:5;
}
.s15-text a:hover,
.s15-text a:focus-visible{
color:#00A86B;
}
/*
=====================================================
MOBILE RESPONSIVE (max-width:600px) - DEDICATED MOBILE VIEW
(Your original working mobile code)
=====================================================
*/
@media (max-width:600px){
body {
margin:0;
padding:0;
background:#eaeeec;
}

/* ==== HERO (No changes) ==== */
.hero-media {
top:20px; bottom:20px; left:20px; right:20px;
}
.hero-title {
font-size:72px;
line-height:1.05;
}
.hero-links {
font-size:20px;
line-height:26px;
}

/* ==== SECTION WRAPS (No changes) ==== */
.s1-wrap, .s2-wrap, .s4-wrap, .s5-wrap, .s9-wrap, .s11-wrap, .s13-wrap, .s14-wrap {
position:relative;
min-height:200vh; background:#eaeeec;
}
.galA-left-wrap{ /* Match new structure height */
position:relative;
min-height:300vh; background:#eaeeec;
}
.s8-wrap{ /* Match new structure height */
position:relative;
min-height:400vh; background:#eaeeec;
}

/* ==== SECTION IMAGES (No changes) ==== */
.s1-frame, .s2-frame, .s4-frame, .s5-frame, .s9-frame, .s11-frame, .s13-frame, .s14-frame,
.s8-BLD-frame { /* Added new S8 frame to mobile positioning */
position:fixed;
top:20px; bottom:20px; left:20px; right:20px; display:flex; align-items:center; justify-content:center; z-index:1; pointer-events:none;
}
.s1-frame img, .s2-frame img, .s4-frame img, .s5-frame img, .s9-frame img, .s11-frame img, .s13-frame img, .s14-frame img,
.s8-BLD-frame img {
width:100%;
height:auto; object-fit:contain; display:block;
}

/* ==== TEXT OVERLAY (Base Structure & BACKGROUND) ==== */
.s1-overlay, .s2-overlay, .s4-overlay, .s5-overlay, .s9-overlay, .s11-overlay, .s13-overlay, .s14-overlay, .s15-overlay {
position:relative !important;
opacity:1 !important; pointer-events:auto !important; transform:none !important; padding:0 20px 80px; /* Base padding */ max-width:100% !important;
/* Full width */ margin:0 auto; background:#eaeeec !important; /* Base background for S1-S14 */ z-index:2;
}

/* S15 Overlay Overrides */
.s15-overlay {
background: transparent !important; max-width: 100% !important; padding: 80px 20px 80px !important;
/* 80px Top/Bottom, 20px Left/Right */ margin: 0 auto !important; position: relative !important; z-index: 5 !important;
}

/* S15 Rail Structural Reset */
.s1-rail, .s2-rail, .s4-rail, .s5-rail, .s9-rail, .s11-rail, .s13-rail, .s14-rail, .s15-rail {
position:relative !important;
width:100% !important; margin:0 !important; left:auto !important; right:auto !important; transform: none !important; } .s15-rail { left: 0 !important; right: 0 !important;
transform: none !important; margin: 0 auto !important; }

/* ==== TEXT (Margins & Color) ==== */
.s1-text, .s2-text, .s4-text, .s5-text, .s9-text, .s11-text, .s13-text, .s14-text, .s15-text {
transform:none !important;
color:#111; text-align:left; font-size:18px; line-height:26px; margin:80px 0 80px 0;
}

/* S15 Text and Link Styling */
.s15-text { color:#fff !important;
text-align:center !important; padding:0 !important; margin: 80px auto 80px auto !important; max-width: 100% !important; width: 100% !important; position: relative !important;
left: 50% !important; transform: translateX(-50%) !important;
}

/* S15 Link Fixes */
.s15-text a { color:#fff !important;
text-decoration: none !important; transition: color .2s ease; display: inline-block !important; position: relative !important; z-index: 100 !important;
} .s15-text a:hover, .s15-text a:focus, .s15-text a:focus-visible, .s15-text a:active { color: #00A86B !important; opacity: 1 !important;
}

/* ==== GALLERIES & FULL BLEEDS (No changes) ==== */
.galA-left-frame, .galB-center-frame, .galC-left-frame { left:20px; right:20px;
} .frame.s3-frame, .frame.s8-frame, .frame.s12-frame, .frame.s15-frame { left:0; right:0; top:0; bottom:0;
}
}
/*
=====================================================
TABLET RESPONSIVE (min-width:601px and max-width:1023px) - FINAL FIXES + DYNAMIC HERO TEXT
=====================================================
*/
@media (min-width:601px) and (max-width:1023px) {

/* Hero Text Scaling (New Addition) */
.hero-title { /* Title remains Dynamic and scales smoothly */ font-size: clamp(80px, 12vw, 100px) !important;
line-height: 1.05 !important; } .hero-links { /* Links are now Static (Fixed Jump) for predictability */ font-size: 24px !important;
line-height: 28px !important; }

/* Structural & Containment Fixes (From previous successful steps) */

/* 1. Ensure sections are scrollable and have background */
.s1-wrap, .s2-wrap, .s4-wrap, .s5-wrap, .s9-wrap, .s11-wrap, .s13-wrap, .s14-wrap { min-height: 200vh !important;
background: #eaeeec !important; }
.galA-left-wrap { min-height: 300vh !important; background: #eaeeec !important; } /* Match new structure height */
.s8-wrap { min-height: 400vh !important; background: #eaeeec !important; } /* Match new structure height */

/* 2. Base content wrappers are restricted and centered (Text/Overlay Column) */
.s1-overlay, .s2-overlay, .s4-overlay, .s5-overlay, .s9-overlay, .s11-overlay, .s13-overlay, .s14-overlay, .s15-overlay { max-width: 600px !important;
padding:0 !important; margin:0 auto !important; background:#eaeeec !important; position: relative !important; opacity: 1 !important; pointer-events: auto !important; transform: none !important;
} .s15-overlay { background: transparent !important; padding: 80px 0 80px 0 !important; z-index: 5 !important;
}

/* 3. Section Images - Constrain them to the 600px column */
.s1-frame, .s2-frame, .s4-frame, .s5-frame, .s9-frame, .s11-frame, .s13-frame, .s14-frame,
.s8-BLD-frame { /* Added new S8 frame to tablet positioning */
position: absolute !important;
left: 50% !important; transform: translateX(-50%) !important; width: 600px !important; margin: 0 auto !important; top: 0 !important; bottom: 0 !important;
padding: 20px !important; }

/* 4. Text Rail and Inner Text */
.s1-text, .s2-text, .s4-text, .s5-text, .s9-text, .s11-text, .s13-text, .s14-text, .s15-text { padding: 0 20px !important;
margin: 80px auto 80px auto !important; left: auto !important; transform: none !important; max-width: 100% !important; width: auto !important;
text-align: left !important; }

/* S15 Text (Centering Fix) */
.s15-text { text-align: center !important; color: #fff !important;
left: 50% !important; transform: translateX(-50%) !important; }

/* 5. Gallery Frames: Constrain them to the 600px column (for future proofing) */
.galA-left-frame, .galB-center-frame, .galC-left-frame { width: 600px !important;
left: 50% !important; transform: translateX(-50%) !important; padding: 0 20px !important;
}
}

</style>
</head>
<body>
<div class="hero-fixed" id="hero">
<div class="hero-bg" aria-hidden="true"></div>
<div class="hero-media" id="hero-media">
<div class="col" id="hero-col">
<h1 class="hero-title" id="hero-title">
<span class="line">Gardenicity</span>
<span class="line">What did</span>
<span class="line">Geddes see?</span>
</h1>
<div class="hero-links" id="hero-links">
<a href="#about">About</a>
<a href="#toc">Table of Contents</a>
</div>
</div>
</div>
</div>

<div class="s1-wrap">
<div class="s1-overlay">
<div class="s1-rail">
<div class="s1-text">
<h2>Section 1: The First Principle</h2>
<p>
The first principle of gardenicity is the unity of the garden and the house. Geddes saw them as one organism, where the house shelters the garden and the garden nourishes the house. This holistic view extended to the people within, connecting their work and life in a seamless flow.
</p>
<p>
He championed the idea that every home, no matter how small, could and should contribute to the larger urban garden—a practical application of regional planning at the intimate scale of the dwelling.
</p>
<p>
The house itself, with its walls and rooms, was just another layer of soil, providing structure for the human plants to grow.
</p>
</div>
</div>
</div>
</div>
<div class="frame s1-frame">
<img id="section1" src="section1.jpg" alt="Section 1 Image">
</div>

<div class="s2-wrap">
<div class="s2-overlay">
<div class="s2-rail">
<div class="s2-text">
<h2>Section 2: The View from Above</h2>
<p>
Geddes' outlook was always synthetic—he sought to connect disparate elements into a meaningful whole. His famous 'Outlook Tower' in Edinburgh served as a physical and philosophical perch from which to survey the city, the region, and the world, understanding their relationships.
</p>
<p>
The garden, too, needed this view from above. Not a literal aerial map, but an imaginative one that placed the small domestic plot within the wider context of the landscape, the watershed, and the seasons. It was a call to see not just the flower, but the flow.
</p>
<p>
This panoramic perspective was essential for true gardenicity, encouraging planners and residents alike to think regionally and act locally.
</p>
</div>
</div>
</div>
</div>
<div class="frame s2-frame">
<img id="section2" src="section2.jpg" alt="Section 2 Image">
</div>

<div class="galA-left-wrap">
<div class="galA-left-overlay">
<div class="s1-rail">
<div class="s1-text">
<h2>Gallery A: Architecture of Life</h2>
<p>Geddes' work was intensely visual, using diagrams and exhibits to communicate complex ideas. These were his "thinking machines," designed to reveal patterns and relationships invisible to the casual eye. This gallery reflects his vision.</p>
</div>
</div>
</div>
</div>
<div class="galA-left-frame">
<img id="galleryA-1" src="GalleryA-1.jpg" alt="Gallery A Image 1">
<img id="galleryA-2" src="GalleryA-2.jpg" alt="Gallery A Image 2">
<img id="galleryA-3" src="GalleryA-3.jpg" alt="GalleryA Image 3">
<img id="galleryA-4" src="gallery-A4.jpg" alt="Gallery A Image 4">
</div>


<div class="s3-wrap">
<div class="s3-overlay">
</div>
</div>
<div class="frame s3-frame">
<img id="section3" src="section3.jpg" alt="Section 3 Image">
</div>

<div class="s4-wrap">
<div class="s4-overlay">
<div class="s4-rail">
<div class="s4-text">
<h2>Section 4: Place, Work, Folk</h2>
<p>
The famous triad of Place, Work, and Folk formed the scaffolding of Geddes’ thought. Gardenicity embodies this perfectly: the **Place** is the specific soil and climate; the **Work** is the labor of cultivation; and the **Folk** are the gardeners, consuming and recreating the environment.
</p>
<p>
A garden is not just a leisure activity; it is a profound social and economic act, connecting people directly to the productive processes of their own habitat.
</p>
</div>
</div>
</div>
</div>
<div class="frame s4-frame">
<img id="section4" src="section4.jpg" alt="Section 4 Image">
</div>

<div class="s5-wrap">
<div class="s5-overlay">
<div class="s5-rail">
<div class="s5-text">
<h2>Section 5: The Eutopian Vision</h2>
<p>
Geddes was a lifelong advocate of Eutopia—not the unattainable 'nowhere' of Utopia, but the achievable 'good place' that could be built from the existing resources and spirit of a community.
</p>
<p>
The garden, humble and persistent, was the ultimate workshop of Eutopia. It represented the tangible transformation of a common plot into a good place, achievable by anyone with a seed and a spade. It was planning by planting.
</p>
</div>
</div>
</div>
</div>
<div class="frame s5-frame">
<img id="section5" src="section5.jpg" alt="Section 5 Image">
</div>

<div class="galB-center-wrap">
<div class="galB-center-overlay">
<div class="s1-rail">
<div class="s1-text">
<h2>Gallery B: The Urban-Rural Balance</h2>
<p>
His philosophy rejected the false dichotomy between city and country. The garden, whether on a balcony or in a backyard, was the place where the rural economy and natural cycles were re-introduced into the heart of the urban experience.
</p>
</div>
</div>
</div>
</div>
<div class="galB-center-frame">
<img id="galB-img0" src="galB-img0.jpg" alt="Gallery B Image 1">
<img id="galB-img1" src="galB-img1.jpg" alt="Gallery B Image 2">
<img id="galB-img2" src="galB-img2.jpg" alt="Gallery B Image 3">
<img id="galB-img3" src="galB-img3.jpg" alt="Gallery B Image 4">
<img id="galB-img4" src="galB-img4.jpg" alt="Gallery B Image 5">
</div>

<div class="s8-wrap">
<div class="s8-overlay">
<div class="s8-rail">
</div>
</div>
</div>
<div class="frame s8-frame">
<img id="section8" src="section8.jpg" alt="Section 8 Image">
</div>
<div class="frame s8-BLD-frame">
<img id="section8-new" src="section8-new.jpg" alt="Section 8 New Bleed Image">
</div>
<div class="s9-wrap">
<div class="s9-overlay">
<div class="s9-rail">
<div class="s9-text">
<h2>Section 9: Time and Place</h2>
<p>
Geddes advocated for a deep reading of the landscape's past, present, and potential future. This temporal dimension is critical to the garden. It is a place of memory, where ancestral plants grow, a place of action, where today's harvest is reaped, and a place of prophecy, where future growth is anticipated.
</p>
<p>
To garden is to engage in profound regional planning, weaving together the human and natural histories of a place.
</p>
</div>
</div>
</div>
</div>
<div class="frame s9-frame">
<img id="section9" src="section9.jpg" alt="Section 9 Image">
</div>

<div class="galC-left-wrap">
<div class="galC-left-overlay">
</div>
</div>
<div class="galC-left-frame">
<img id="galC-img0" src="galC-img0.jpg" alt="Gallery C Image 1">
<img id="galC-img1" src="galC-img1.jpg" alt="Gallery C Image 2">
<img id="galC-img2" src="galC-img2.jpg" alt="Gallery C Image 3">
<img id="galC-img3" src="galC-img3.jpg" alt="Gallery C Image 4">
<img id="galC-img4" src="galC-img4.jpg" alt="Gallery C Image 5">
<img id="galC-img5" src="galC-img5.jpg" alt="Gallery C Image 6">
</div>

<div class="s11-wrap">
<div class="s11-overlay">
<div class="s11-rail">
<div class="s11-text">
<h2>Section 11: The Civics of Gardening</h2>
<p>
For Geddes, every act of urban renewal began with self-renewal. His famous "Valley Section" diagram showed the flow of natural resources from the hill to the sea, connecting diverse occupations.
</p>
<p>
The garden is the urban equivalent of the Valley Section, showing the civics of resource flow and transformation. It is the purest form of citizenship, creating wealth and beauty directly from the ground up.
</p>
</div>
</div>
</div>
</div>
<div class="frame s11-frame">
<img id="section11" src="section11.jpg" alt="Section 11 Image">
</div>

<div class="s12-wrap">
<div class="s12-overlay">
<div class="s12-rail">
</div>
</div>
</div>
<div class="frame s12-frame">
<img id="section12" src="section12.jpg" alt="Section 12 Image">
</div>

<div class="s13-wrap">
<div class="s13-overlay">
<div class="s13-rail">
<div class="s13-text">
<h2>Section 13: Education as Evolution</h2>
<p>
His educational philosophy, summarized by "Educate, Agitate, Organize," was deeply intertwined with his urban vision. He used the garden as an outdoor classroom, teaching not just botany, but biology, geography, and sociology.
</p>
<p>
Gardenicity demands a kind of continuous learning—a practical, experiential education that evolves with the seasons and the demands of the environment.
</p>
</div>
</div>
</div>
</div>
<div class="frame s13-frame">
<img id="section13" src="section13.jpg" alt="Section 13 Image">
</div>

<div class="s14-wrap">
<div class="s14-overlay">
<div class="s14-rail">
<div class="s14-text">
<h2>Section 14: The Synthesis of Life</h2>
<p>
Geddes' ultimate goal was synthesis: uniting the arts and sciences, the city and the country, the individual and the community.
</p>
<p>
The garden is the ultimate synthesis. It is art in its composition, science in its ecology, labor in its maintenance, and community in its yield. It is the simple, practical expression of his grand, holistic vision.
</p>
</div>
</div>
</div>
</div>
<div class="frame s14-frame">
<img id="section14" src="section14.jpg" alt="Section 14 Image">
</div>

<div class="s15-wrap">
<div class="s15-overlay">
<div class="s15-rail">
<div class="s15-text">
<h2>Section 15: Conclusion</h2>
<p>
Gardenicity is more than a metaphor; it is a working model for ecological humanism. It is the principle that humanity, like a garden, must be actively cultivated to yield its fullest potential.
</p>
<p>
The greatest lesson of Patrick Geddes is that to save the city, one must first learn to garden.
</p>
<p>
<a href="#toc">Return to Table of Contents</a>
</p>
</div>
</div>
</div>
</div>
<div class="frame s15-frame">
<img id="section15" src="section15.jpg" alt="Section 15 Image">
</div>


<div class="after"></div>

<script>
// --- Polyfill and Utility Functions ---
const root = document.documentElement;
let scrollPos = 0;
let viewportHeight = window.innerHeight;
let viewportWidth = window.innerWidth;

// Elements/Containers
const hero = { el: document.getElementById('hero'), h: 0 };
const s1 = { el: document.querySelector('.s1-wrap'), h: 0, y: 0 };
const s2 = { el: document.querySelector('.s2-wrap'), h: 0, y: 0 };
const galA = { el: document.querySelector('.galA-left-wrap'), h: 0, y: 0 };
const s3 = { el: document.querySelector('.s3-wrap'), h: 0, y: 0 };
const s4 = { el: document.querySelector('.s4-wrap'), h: 0, y: 0 };
const s5 = { el: document.querySelector('.s5-wrap'), h: 0, y: 0 };
const galB = { el: document.querySelector('.galB-center-wrap'), h: 0, y: 0 };
const s8 = { el: document.querySelector('.s8-wrap'), h: 0, y: 0 };
const s9 = { el: document.querySelector('.s9-wrap'), h: 0, y: 0 };
const galC = { el: document.querySelector('.galC-left-wrap'), h: 0, y: 0 };
const s11 = { el: document.querySelector('.s11-wrap'), h: 0, y: 0 };
const s12 = { el: document.querySelector('.s12-wrap'), h: 0, y: 0 };
const s13 = { el: document.querySelector('.s13-wrap'), h: 0, y: 0 };
const s14 = { el: document.querySelector('.s14-wrap'), h: 0, y: 0 };
const s15 = { el: document.querySelector('.s15-wrap'), h: 0, y: 0 };

const sections = [hero, s1, s2, galA, s3, s4, s5, galB, s8, s9, galC, s11, s12, s13, s14, s15];

function clamp(min, value, max) {
    return Math.max(min, Math.min(max, value));
}
function easeOutQuad(t) {
    return t * (2 - t);
}

// --- Measurement Functions ---

function measureHero() {
    const el = hero.el;
    const h = el.offsetHeight;
    hero.h = h;
    hero.y = clamp(0, scrollPos, h - viewportHeight);
    hero.active = scrollPos >= 0 && scrollPos < h;
}

function measureS1() {
    const el = s1.el;
    const h = el.offsetHeight;
    s1.h = h;
    s1.y = clamp(0, scrollPos - el.offsetTop, h);
    s1.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS2() {
    const el = s2.el;
    const h = el.offsetHeight;
    s2.h = h;
    s2.y = clamp(0, scrollPos - el.offsetTop, h);
    s2.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureGalA() {
    const el = galA.el;
    const h = el.offsetHeight;
    galA.h = h; // THIS WILL BE 350VH (70 * 5)
    galA.y = clamp(0, scrollPos - el.offsetTop, h);
    galA.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS3() {
    const el = s3.el;
    const h = el.offsetHeight;
    s3.h = h;
    s3.y = clamp(0, scrollPos - el.offsetTop, h);
    s3.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS4() {
    const el = s4.el;
    const h = el.offsetHeight;
    s4.h = h;
    s4.y = clamp(0, scrollPos - el.offsetTop, h);
    s4.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS5() {
    const el = s5.el;
    const h = el.offsetHeight;
    s5.h = h;
    s5.y = clamp(0, scrollPos - el.offsetTop, h);
    s5.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureGalB() {
    const el = galB.el;
    const h = el.offsetHeight;
    galB.h = h;
    galB.y = clamp(0, scrollPos - el.offsetTop, h);
    galB.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS8() {
    const el = s8.el;
    const h = el.offsetHeight;
    s8.h = h; // THIS WILL BE 480VH
    s8.y = clamp(0, scrollPos - el.offsetTop, h);
    s8.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS9() {
    const el = s9.el;
    const h = el.offsetHeight;
    s9.h = h;
    s9.y = clamp(0, scrollPos - el.offsetTop, h);
    s9.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureGalC() {
    const el = galC.el;
    const h = el.offsetHeight;
    galC.h = h;
    galC.y = clamp(0, scrollPos - el.offsetTop, h);
    galC.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS11() {
    const el = s11.el;
    const h = el.offsetHeight;
    s11.h = h;
    s11.y = clamp(0, scrollPos - el.offsetTop, h);
    s11.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS12() {
    const el = s12.el;
    const h = el.offsetHeight;
    s12.h = h;
    s12.y = clamp(0, scrollPos - el.offsetTop, h);
    s12.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS13() {
    const el = s13.el;
    const h = el.offsetHeight;
    s13.h = h;
    s13.y = clamp(0, scrollPos - el.offsetTop, h);
    s13.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS14() {
    const el = s14.el;
    const h = el.offsetHeight;
    s14.h = h;
    s14.y = clamp(0, scrollPos - el.offsetTop, h);
    s14.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}
function measureS15() {
    const el = s15.el;
    const h = el.offsetHeight;
    s15.h = h;
    s15.y = clamp(0, scrollPos - el.offsetTop, h);
    s15.active = scrollPos >= el.offsetTop && scrollPos < el.offsetTop + h;
}

// --- Update Function (Core Logic) ---

function update() {
    scrollPos = window.scrollY;

    // --- HERO ---
    measureHero();
    if (hero.active) {
        let heroProgress = hero.y / (hero.h - viewportHeight);
        let shiftY = heroProgress * 200;
        let alpha = 1 - heroProgress * 1.5;
        let titleAlpha = clamp(0, heroProgress * 5, 1);
        let titleShift = -heroProgress * 50;

        root.style.setProperty('--shift', shiftY.toFixed(3) + 'px');
        root.style.setProperty('--heroAlpha', alpha.toFixed(3));
        root.style.setProperty('--heroBlur', heroProgress.toFixed(3));
        root.style.setProperty('--titleOpacity', titleAlpha.toFixed(3));
        root.style.setProperty('--linksOpacity', titleAlpha.toFixed(3));
    }


    // --- S1 ---
    measureS1();
    if (s1.active) {
        let s1Progress = s1.y / s1.h;
        let s1Alpha = clamp(0, s1Progress * 1.5, 1);
        let s1Overlay = 1;
        let s1Y = -s1Progress * (s1.el.querySelector('.s1-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s1Overlay', s1Overlay.toFixed(3));
        root.style.setProperty('--s1Y', s1Y.toFixed(3) + 'px');
        root.style.setProperty('--s1ImgOpacity', s1Alpha.toFixed(3));
    }

    // --- S2 ---
    measureS2();
    if (s2.active) {
        let s2Progress = s2.y / s2.h;
        let s2Alpha = clamp(0, s2Progress * 1.5, 1);
        let s2Overlay = 1;
        let s2Y = -s2Progress * (s2.el.querySelector('.s2-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s2Overlay', s2Overlay.toFixed(3));
        root.style.setProperty('--s2Y', s2Y.toFixed(3) + 'px');
        root.style.setProperty('--s2ImgOpacity', s2Alpha.toFixed(3));
    }


    // --- GAL A (Section 6) ---
    measureGalA();
    if(galA.active){
        // 5 phases over the new 350vh height
        let galAProgress = galA.y/galA.h;
        let galAImg0Alpha = clamp(0, (galAProgress * 5) - 0, 1) - clamp(0, (galAProgress * 5) - 1, 1);
        let galAImg1Alpha = clamp(0, (galAProgress * 5) - 1, 1) - clamp(0, (galAProgress * 5) - 2, 1);
        let galAImg2Alpha = clamp(0, (galAProgress * 5) - 2, 1) - clamp(0, (galAProgress * 5) - 3, 1);
        let galAImg3Alpha = clamp(0, (galAProgress * 5) - 3, 1) - clamp(0, (galAProgress * 5) - 4, 1);
        let galAImg4Alpha = clamp(0, (galAProgress * 5) - 4, 1) - clamp(0, (galAProgress * 5) - 5, 1); // NEW: Image 4

        root.style.setProperty('--galAImg0Opacity', galAImg0Alpha.toFixed(3));
        root.style.setProperty('--galAImg1Opacity', galAImg1Alpha.toFixed(3));
        root.style.setProperty('--galAImg2Opacity', galAImg2Alpha.toFixed(3));
        root.style.setProperty('--galAImg3Opacity', galAImg3Alpha.toFixed(3));
        root.style.setProperty('--galAImg4Opacity', galAImg4Alpha.toFixed(3)); // NEW: Set Image 4 opacity
    }
    
    // --- S3 ---
    measureS3();
    if(s3.active){
        let s3Progress = s3.y/s3.h;
        let s3AlphaOut = 1 - s3Progress;
        let s3Scale = 1 + s3Progress * 0.2;
        
        root.style.setProperty('--s3ImgOpacity', s3AlphaOut.toFixed(3));
        root.style.setProperty('--s3Scale', s3Scale.toFixed(3));
    }


    // --- S4 ---
    measureS4();
    if (s4.active) {
        let s4Progress = s4.y / s4.h;
        let s4Alpha = clamp(0, s4Progress * 1.5, 1);
        let s4Overlay = 1;
        let s4Y = -s4Progress * (s4.el.querySelector('.s4-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s4Overlay', s4Overlay.toFixed(3));
        root.style.setProperty('--s4Y', s4Y.toFixed(3) + 'px');
        root.style.setProperty('--s4ImgOpacity', s4Alpha.toFixed(3));
    }

    // --- S5 ---
    measureS5();
    if (s5.active) {
        let s5Progress = s5.y / s5.h;
        let s5Alpha = clamp(0, s5Progress * 1.5, 1);
        let s5Overlay = 1;
        let s5Y = -s5Progress * (s5.el.querySelector('.s5-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s5Overlay', s5Overlay.toFixed(3));
        root.style.setProperty('--s5Y', s5Y.toFixed(3) + 'px');
        root.style.setProperty('--s5ImgOpacity', s5Alpha.toFixed(3));
    }


    // --- GAL B (Section 7) ---
    measureGalB();
    if(galB.active){
        // 5 phases over the 280vh height (5.6x scroll speed)
        let galBProgress = galB.y/galB.h;
        let galBImg0Alpha = clamp(0, (galBProgress * 5.6) - 0, 1) - clamp(0, (galBProgress * 5.6) - 1, 1);
        let galBImg1Alpha = clamp(0, (galBProgress * 5.6) - 1, 1) - clamp(0, (galBProgress * 5.6) - 2, 1);
        let galBImg2Alpha = clamp(0, (galBProgress * 5.6) - 2, 1) - clamp(0, (galBProgress * 5.6) - 3, 1);
        let galBImg3Alpha = clamp(0, (galBProgress * 5.6) - 3, 1) - clamp(0, (galBProgress * 5.6) - 4, 1);
        let galBImg4Alpha = clamp(0, (galBProgress * 5.6) - 4, 1) - clamp(0, (galBProgress * 5.6) - 5, 1);

        root.style.setProperty('--galBImg0Opacity', galBImg0Alpha.toFixed(3));
        root.style.setProperty('--galBImg1Opacity', galBImg1Alpha.toFixed(3));
        root.style.setProperty('--galBImg2Opacity', galBImg2Alpha.toFixed(3));
        root.style.setProperty('--galBImg3Opacity', galBImg3Alpha.toFixed(3));
        root.style.setProperty('--galBImg4Opacity', galBImg4Alpha.toFixed(3));
    }
    
    
    // --- S8 (Section 8) - UPDATED LOGIC FOR CROSS-FADE ---
    measureS8();
    if(s8.active){
        let s8Progress = s8.y/s8.h;
        let s8AlphaOut = 1; // Controls opacity of original #section8
        let s8NewOpacity = 0; // Controls opacity of new #section8-new
        let s8Scale = 1;

        // Phase 1: Zoom/Hold (over first 280vh of the 480vh total height)
        const PHASE_1_END_VH = 280;
        const PHASE_1_END_PCT = PHASE_1_END_VH / s8.h;

        if (s8Progress <= 1) {
            // Apply zoom/scale based on y position
            // Zoom occurs over the first 280vh (using proportional scaling)
            let zoomProgress = clamp(0, s8.y / (PHASE_1_END_VH * 1.5), 1); // Arbitrary factor to control speed
            s8Scale = 1 + zoomProgress * 0.2;
        }

        // Phase 2: Cross-fade (280vh to 380vh - duration 100vh)
        const FADE_START_VH = 280;
        const FADE_DURATION_VH = 100;
        
        if (s8.y >= FADE_START_VH) {
            let crossFadeAmt = clamp(0, (s8.y - FADE_START_VH) / FADE_DURATION_VH, 1);
            
            // S8 original fades out
            s8AlphaOut = 1 - crossFadeAmt; 
            
            // S8 New fades in
            s8NewOpacity = crossFadeAmt;
        } else {
            // Before cross-fade, S8 is fully visible
            s8AlphaOut = 1;
            s8NewOpacity = 0;
        }

        // Phase 3: S8 New fades out (380vh to 480vh - duration 100vh)
        const NEW_FADE_OUT_START_VH = 380;
        const NEW_FADE_OUT_DURATION_VH = 100;
        
        if (s8.y >= NEW_FADE_OUT_START_VH) {
            let newFadeOutAmt = clamp(0, (s8.y - NEW_FADE_OUT_START_VH) / NEW_FADE_OUT_DURATION_VH, 1);
            
            // S8 New fades out (from 1 back to 0)
            s8NewOpacity = 1 - newFadeOutAmt;
        }

        root.style.setProperty('--s8ImgOpacity', s8AlphaOut.toFixed(3));
        root.style.setProperty('--s8NewOpacity', s8NewOpacity.toFixed(3)); // NEW: Set New S8 image opacity
        root.style.setProperty('--s8Scale', s8Scale.toFixed(3));
    }


    // --- S9 ---
    measureS9();
    if (s9.active) {
        let s9Progress = s9.y / s9.h;
        let s9Alpha = clamp(0, s9Progress * 1.5, 1);
        let s9Overlay = 1;
        let s9Y = -s9Progress * (s9.el.querySelector('.s9-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s9Overlay', s9Overlay.toFixed(3));
        root.style.setProperty('--s9Y', s9Y.toFixed(3) + 'px');
        root.style.setProperty('--s9ImgOpacity', s9Alpha.toFixed(3));
    }


    // --- GAL C (Section 10) ---
    measureGalC();
    if(galC.active){
        // 6 phases over the 280vh height (5.6x scroll speed)
        let galCProgress = galC.y/galC.h;
        let galCImg0Alpha = clamp(0, (galCProgress * 6) - 0, 1) - clamp(0, (galCProgress * 6) - 1, 1);
        let galCImg1Alpha = clamp(0, (galCProgress * 6) - 1, 1) - clamp(0, (galCProgress * 6) - 2, 1);
        let galCImg2Alpha = clamp(0, (galCProgress * 6) - 2, 1) - clamp(0, (galCProgress * 6) - 3, 1);
        let galCImg3Alpha = clamp(0, (galCProgress * 6) - 3, 1) - clamp(0, (galCProgress * 6) - 4, 1);
        let galCImg4Alpha = clamp(0, (galCProgress * 6) - 4, 1) - clamp(0, (galCProgress * 6) - 5, 1);
        let galCImg5Alpha = clamp(0, (galCProgress * 6) - 5, 1) - clamp(0, (galCProgress * 6) - 6, 1);

        root.style.setProperty('--galCImg0Opacity', galCImg0Alpha.toFixed(3));
        root.style.setProperty('--galCImg1Opacity', galCImg1Alpha.toFixed(3));
        root.style.setProperty('--galCImg2Opacity', galCImg2Alpha.toFixed(3));
        root.style.setProperty('--galCImg3Opacity', galCImg3Alpha.toFixed(3));
        root.style.setProperty('--galCImg4Opacity', galCImg4Alpha.toFixed(3));
        root.style.setProperty('--galCImg5Opacity', galCImg5Alpha.toFixed(3));
    }

    // --- S11 ---
    measureS11();
    if (s11.active) {
        let s11Progress = s11.y / s11.h;
        let s11Alpha = clamp(0, s11Progress * 1.5, 1);
        let s11Overlay = 1;
        let s11Y = -s11Progress * (s11.el.querySelector('.s11-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s11Overlay', s11Overlay.toFixed(3));
        root.style.setProperty('--s11Y', s11Y.toFixed(3) + 'px');
        root.style.setProperty('--s11ImgOpacity', s11Alpha.toFixed(3));
    }


    // --- S12 ---
    measureS12();
    if(s12.active){
        let s12Progress = s12.y/s12.h;
        let s12AlphaOut = 1 - s12Progress;
        let s12Scale = 1 + s12Progress * 0.2;
        
        root.style.setProperty('--s12ImgOpacity', s12AlphaOut.toFixed(3));
        root.style.setProperty('--s12Scale', s12Scale.toFixed(3));
    }


    // --- S13 ---
    measureS13();
    if (s13.active) {
        let s13Progress = s13.y / s13.h;
        let s13Alpha = clamp(0, s13Progress * 1.5, 1);
        let s13Overlay = 1;
        let s13Y = -s13Progress * (s13.el.querySelector('.s13-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s13Overlay', s13Overlay.toFixed(3));
        root.style.setProperty('--s13Y', s13Y.toFixed(3) + 'px');
        root.style.setProperty('--s13ImgOpacity', s13Alpha.toFixed(3));
    }

    // --- S14 ---
    measureS14();
    if (s14.active) {
        let s14Progress = s14.y / s14.h;
        let s14Alpha = clamp(0, s14Progress * 1.5, 1);
        let s14Overlay = 1;
        let s14Y = -s14Progress * (s14.el.querySelector('.s14-text').offsetHeight - viewportHeight);

        root.style.setProperty('--s14Overlay', s14Overlay.toFixed(3));
        root.style.setProperty('--s14Y', s14Y.toFixed(3) + 'px');
        root.style.setProperty('--s14ImgOpacity', s14Alpha.toFixed(3));
    }


    // --- S15 ---
    measureS15();
    if(s15.active){
        let s15Progress = s15.y/s15.h;
        let s15AlphaOut = 1 - s15Progress;
        let s15Scale = 1 + s15Progress * 0.1;
        let s15Overlay = clamp(0, s15Progress * 3, 1); // Text fades in faster
        let s15Y = -s15Progress * (s15.el.querySelector('.s15-text').offsetHeight - viewportHeight) * 0.5;

        root.style.setProperty('--s15ImgOpacity', s15AlphaOut.toFixed(3));
        root.style.setProperty('--s15Scale', s15Scale.toFixed(3));
        root.style.setProperty('--s15Overlay', s15Overlay.toFixed(3));
        root.style.setProperty('--s15Y', s15Y.toFixed(3) + 'px');
    }


    requestAnimationFrame(update);
}

// --- Initialization and Event Handlers ---

function onResize() {
    viewportHeight = window.innerHeight;
    viewportWidth = window.innerWidth;
    
    // Re-measure all sections to update h values (VH-dependent heights change)
    measureHero();
    measureS1(); measureS2(); measureGalA(); measureS3(); measureS4(); measureS5(); measureGalB(); 
    measureS8(); measureS9(); measureGalC(); measureS11(); measureS12(); measureS13(); measureS14(); measureS15();
    
    // Re-run the update loop to apply new calculated offsets
    update();
}

async function init(){
    if(document.fonts && document.fonts.ready){ try{ await document.fonts.ready; }catch(e){} }
    
    // Initial measurement
    onResize();

    // Start the scroll loop
    update();
    
    addEventListener('resize', onResize);
}

// Ensure images are loaded before initializing if necessary, but init here to start JS.
init();

</script>
</body>
</html>

